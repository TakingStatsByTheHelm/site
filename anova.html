<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Taking Stats by the Helm</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="A Forum for Understanding Statistics">
  <meta name="generator" content="bookdown 0.1 and GitBook 2.6.7">

  <meta property="og:title" content="Taking Stats by the Helm" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A Forum for Understanding Statistics" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Taking Stats by the Helm" />
  
  <meta name="twitter:description" content="A Forum for Understanding Statistics" />
  

<meta name="author" content="Jonathan Lee Helm">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="t-tests.html">
<link rel="next" href="regression.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Forum for Understanding Statistics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="notation.html"><a href="notation.html"><i class="fa fa-check"></i><b>2</b> Notation</a></li>
<li class="chapter" data-level="3" data-path="t-tests.html"><a href="t-tests.html"><i class="fa fa-check"></i><b>3</b> <em>t</em>-tests</a></li>
<li class="chapter" data-level="4" data-path="anova.html"><a href="anova.html"><i class="fa fa-check"></i><b>4</b> ANOVA</a><ul>
<li class="chapter" data-level="4.1" data-path="anova.html"><a href="anova.html#read-in-the-data"><i class="fa fa-check"></i><b>4.1</b> Read in the Data</a></li>
<li class="chapter" data-level="4.2" data-path="anova.html"><a href="anova.html#one-way-anova"><i class="fa fa-check"></i><b>4.2</b> One-Way ANOVA</a></li>
<li class="chapter" data-level="4.3" data-path="anova.html"><a href="anova.html#two-way-anova"><i class="fa fa-check"></i><b>4.3</b> Two-Way ANOVA</a></li>
<li class="chapter" data-level="4.4" data-path="anova.html"><a href="anova.html#tukeys-post-hoc-test"><i class="fa fa-check"></i><b>4.4</b> Tukey’s Post-Hoc Test</a></li>
<li class="chapter" data-level="4.5" data-path="anova.html"><a href="anova.html#summary"><i class="fa fa-check"></i><b>4.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>5</b> Regression</a></li>
<li class="chapter" data-level="6" data-path="multilevel-models.html"><a href="multilevel-models.html"><i class="fa fa-check"></i><b>6</b> Multilevel Models</a></li>
<li class="chapter" data-level="7" data-path="structural-equation-models.html"><a href="structural-equation-models.html"><i class="fa fa-check"></i><b>7</b> Structural Equation Models</a></li>
<li class="divider"></li>
<li><a href="https://TakingStatsByTheHelm.github.io/site" target="blank">Maintained by Jonathan Lee Helm</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Taking Stats by the Helm</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="anova" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> ANOVA</h1>
<p>This chapter uses the education data to demonstrate 1-way and 2-way between subjects analysis of variance (ANOVA). Then the chapter demonstrates how to use conduct a Tukey post-hoc test to determine specific mean differences between groups.</p>
<div id="read-in-the-data" class="section level2">
<h2><span class="header-section-number">4.1</span> Read in the Data</h2>
<p>We will use the get_url() and read.csv() functions to read the education data from github into R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RCurl)</code></pre></div>
<pre><code>## Loading required package: bitops</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data_url =<span class="st"> </span><span class="kw">getURL</span>(<span class="st">&#39;https://raw.githubusercontent.com/TakingStatsByTheHelm/Book/1.-Data-Sets/edu_data.csv&#39;</span>)
edu_data =<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">text =</span> data_url)</code></pre></div>
</div>
<div id="one-way-anova" class="section level2">
<h2><span class="header-section-number">4.2</span> One-Way ANOVA</h2>
<p>Let’s run an analysis of variance. Let’s see if there is any difference in the means for academic performance for parents’ level of college education. In this case, variable some_col 0 = 0%-10% of parents had some college education, 1 = 11%-20% of parents had some college education, 2 = &gt;20% of parents had some college education.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># use the aov() function to fit the analysis of variance</span>
model =<span class="st"> </span><span class="kw">aov</span>(api00 ~<span class="st"> </span><span class="kw">as.factor</span>(some_col), <span class="dt">data =</span> edu_data)

<span class="co"># use the summary function to get the ANOVA summary table back.</span>
<span class="kw">summary</span>(model)</code></pre></div>
<pre><code>##                      Df  Sum Sq Mean Sq F value   Pr(&gt;F)    
## as.factor(some_col)   2  492909  246455   22.33 8.63e-10 ***
## Residuals           312 3443393   11037                     
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>The summary() function gives back the degrees of freedom, the sums squares between (in this case, labelled ‘as.factor(some_col)’, and the Sums of squares within (labeled ‘Residuals’). We also see the mean squares, the F-value, and the corresponding <em>p</em>-value.</p>
<p>Based on our results from the ANOVA, we can see that at least one of the academic performance means differs across the three levels of parents’ college education.</p>
</div>
<div id="two-way-anova" class="section level2">
<h2><span class="header-section-number">4.3</span> Two-Way ANOVA</h2>
<p>Let’s run an analysis of variance with two factors and an interaction. Let’s see if there is any difference in the means for academic performance for year round schools, parents’ level of college education, and their interaction. In this case, variable ‘some_col’ 0 = 0%-10% of parents had some college education, 1 = 11%-20% of parents had some college education, 2 = &gt;20% of parents had some college education; and variable ‘some_col’ equals 0 for schools that do not follow year-round schedules, and 1 for school that do.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># use the aov() function to fit the analysis of variance</span>
model =<span class="st"> </span><span class="kw">aov</span>(api00 ~<span class="st"> </span><span class="kw">as.factor</span>(some_col) +<span class="st"> </span><span class="kw">as.factor</span>(yr_rnd) +<span class="st"> </span><span class="kw">as.factor</span>(some_col):<span class="kw">as.factor</span>(yr_rnd), <span class="dt">data =</span> edu_data)

<span class="co"># use the summary function to get the ANOVA summary table back.</span>
<span class="kw">summary</span>(model)</code></pre></div>
<pre><code>##                                        Df  Sum Sq Mean Sq F value   Pr(&gt;F)
## as.factor(some_col)                     2  492909  246455  27.328 1.18e-11
## as.factor(yr_rnd)                       1  553938  553938  61.422 7.50e-14
## as.factor(some_col):as.factor(yr_rnd)   2  102722   51361   5.695  0.00373
## Residuals                             309 2786733    9019                 
##                                          
## as.factor(some_col)                   ***
## as.factor(yr_rnd)                     ***
## as.factor(some_col):as.factor(yr_rnd) ** 
## Residuals                                
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>The summary() function gives back the degrees of freedom, the sums squares for the main effect of ‘some_col’, sums of saures for the main effect of ‘yr_rnd’, and sums ofsquares within (labeled ‘Residuals’). We also see the degrees of freedom, the mean squares, the sample F-values, and the corresponding <em>p</em>-value.</p>
<p>Based on our results from the ANOVA, we can see that there are significant main effects for the percentage of parents that received some college education, for year-round schooling, and their interaction. Accordingly, average academic performance differs across the groups of parents’ college education.</p>
<p>Now, we would like to know more about the significant interaction. We perform post-hoc tests to determine which of the specific means are different from one another.</p>
</div>
<div id="tukeys-post-hoc-test" class="section level2">
<h2><span class="header-section-number">4.4</span> Tukey’s Post-Hoc Test</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># use the aov() function to fit the analysis of variance</span>
<span class="kw">TukeyHSD</span>(model)</code></pre></div>
<pre><code>##   Tukey multiple comparisons of means
##     95% family-wise confidence level
## 
## Fit: aov(formula = api00 ~ as.factor(some_col) + as.factor(yr_rnd) + as.factor(some_col):as.factor(yr_rnd), data = edu_data)
## 
## $`as.factor(some_col)`
##         diff       lwr       upr     p adj
## 1-0  8.96207 -25.75770  43.68184 0.8159125
## 2-0 84.94696  51.68407 118.20984 0.0000000
## 2-1 75.98489  47.37104 104.59874 0.0000000
## 
## $`as.factor(yr_rnd)`
##         diff       lwr       upr p adj
## 1-0 -90.3276 -113.6334 -67.02182     0
## 
## $`as.factor(some_col):as.factor(yr_rnd)`
##                diff          lwr        upr     p adj
## 1:0-0:0  -14.087179  -66.8994247   38.72507 0.9731331
## 2:0-0:0   41.136232   -6.7494899   89.02195 0.1383624
## 0:1-0:0 -167.069697 -237.9166256  -96.22277 0.0000000
## 1:1-0:0  -92.887879 -150.6261308  -35.14963 0.0000846
## 2:1-0:0  -22.850000  -91.6857250   45.98573 0.9324299
## 2:0-1:0   55.223411   12.9631793   97.48364 0.0029017
## 0:1-1:0 -152.982517 -220.1552215  -85.80981 0.0000000
## 1:1-1:0  -78.800699 -131.9663895  -25.63501 0.0004038
## 2:1-1:0   -8.762821  -73.8108175   56.28518 0.9988786
## 0:1-2:0 -208.205929 -271.5784882 -144.83337 0.0000000
## 1:1-2:0 -134.024111 -182.2993602  -85.74886 0.0000000
## 2:1-2:0  -63.986232 -125.1021137   -2.87035 0.0341273
## 1:1-0:1   74.181818    3.0710267  145.29261 0.0352191
## 2:1-0:1  144.219697   63.8368881  224.60251 0.0000070
## 2:1-1:1   70.037879    0.9306114  139.14515 0.0449087</code></pre>
<p>The first two components of the output contain the tests for the marginal effects. More specifically, we see the three differences for the marginal means of ‘some_col’, and then we see the differences for the marginal means of ‘yr_rnd’.</p>
<p>More specifically, we see that schools with 0%-10% of parents had some college education do not significantly differ from school with 11%-20% of parents had some college education (1 vs. 0 in the comparison). However, we see that schools with &gt;20% of parents had some college education differed from both schools with 0%-10% and schools with 11%-20% of parents with college education (2 vs. 0 comparison, and 2 versus 1 comparison).</p>
<p>Moreover, we see a main effect of year round school (1 versus 2 in the second comparison).</p>
<p>Finally, within the third subsection of the post-hos output, we see differences for each of the cell means. In particular the row labled ‘1:0-0:0’ examines the difference between schools with 0%-10% of parents with college education and non year-round calendars (e.g. the 0:0 part), and schools with 11%-20% of parents with college education and non year-round calendars (e.g. the 1:0 part). We do not see a significant different for these two cell means (<em>p</em> &gt; .05). The remaining columns describe more differences between the cell means.</p>
</div>
<div id="summary" class="section level2">
<h2><span class="header-section-number">4.5</span> Summary</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="t-tests.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="regression.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://TakingStatsByTheHelm.github.io/site03-ANOVA.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
